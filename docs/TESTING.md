# Testing Guide

## –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 1. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ (Makefile)
npx obf-minify-build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls -la build/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: css/, html/, js/, assets/, resources/
```

### 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—É—Ç–∏

```bash
# –¢–µ—Å—Ç 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞–ø–∫–∏
npx obf-minify-build --src src --out dist

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls -la dist/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–µ –∂–µ –ø–∞–ø–∫–∏, —á—Ç–æ –∏ –≤ build/
```

### 3. Node.js —Å–±–æ—Ä–∫–∞

```bash
# –¢–µ—Å—Ç 3: Node.js —Å–±–æ—Ä–∫–∞
npx obf-minify-build --no-make

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls -la build/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–µ –∂–µ –ø–∞–ø–∫–∏
```

### 4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
# –¢–µ—Å—Ç 4: Node.js —Å–±–æ—Ä–∫–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—É—Ç—è–º–∏
npx obf-minify-build --src src --out test-custom --no-make

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls -la test-custom/
```

### 5. –°–ø—Ä–∞–≤–∫–∞

```bash
# –¢–µ—Å—Ç 5: –°–ø—Ä–∞–≤–∫–∞
npx obf-minify-build --help
# –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ CSS
cat build/css/protection.*.css
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –ø–µ—Ä–µ–Ω–æ—Å–æ–≤)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ HTML
cat build/html/index.html
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
```

### –û–±—Ñ—É—Å–∫–∞—Ü–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ JS
cat build/js/protection.*.js
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω (–Ω–µ—á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ inline-—Å–∫—Ä–∏–ø—Ç–æ–≤
grep -o "function _0x[a-f0-9]*" build/html/index.html
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
ls build/css/ build/js/
# –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Ö–µ—à–∏ –≤ –∏–º–µ–Ω–∞—Ö

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
grep -o "protection\.[a-f0-9]*" build/html/index.html
# –°—Å—ã–ª–∫–∏ –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
#!/bin/bash
# test-all.sh

echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ obf-minify-build..."

# –û—á–∏—Å—Ç–∫–∞
rm -rf build dist test-custom

echo "‚úÖ –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞"
npx obf-minify-build
if [ $? -eq 0 ]; then
    echo "‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å"
    exit 1
fi

echo "‚úÖ –¢–µ—Å—Ç 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—É—Ç–∏"
npx obf-minify-build --src src --out dist
if [ $? -eq 0 ]; then
    echo "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—É—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç"
else
    echo "‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—É—Ç–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç"
    exit 1
fi

echo "‚úÖ –¢–µ—Å—Ç 3: Node.js —Å–±–æ—Ä–∫–∞"
npx obf-minify-build --no-make
if [ $? -eq 0 ]; then
    echo "‚úÖ Node.js —Å–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç"
else
    echo "‚ùå Node.js —Å–±–æ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
    exit 1
fi

echo "‚úÖ –¢–µ—Å—Ç 4: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã"
npx obf-minify-build --src src --out test-custom --no-make
if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç"
else
    echo "‚ùå –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç"
    exit 1
fi

echo "‚úÖ –¢–µ—Å—Ç 5: –°–ø—Ä–∞–≤–∫–∞"
npx obf-minify-build --help > /dev/null
if [ $? -eq 0 ]; then
    echo "‚úÖ –°–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç"
else
    echo "‚ùå –°–ø—Ä–∞–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
    exit 1
fi

echo "üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!"
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x test-all.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
./test-all.sh
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–±–æ—Ä–∫–∏

### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
du -sh src/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
du -sh build/

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤
echo "–ò—Å—Ö–æ–¥–Ω–∏–∫–∏: $(du -sh src/ | cut -f1)"
echo "–°–±–æ—Ä–∫–∞: $(du -sh build/ | cut -f1)"
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```bash
# –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏
time npx obf-minify-build

# –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ Node.js —Å–±–æ—Ä–∫–∏
time npx obf-minify-build --no-make
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è HTML

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ HTML (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω html-validate)
npx html-validate build/html/*.html

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é w3c-validator
npx w3c-html-validator build/html/*.html
```

## –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ Makefile
make all VERBOSE=1

# –û—Ç–ª–∞–¥–∫–∞ Node.js
DEBUG=* npx obf-minify-build --no-make
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ obfuscator.json
cat obfuscator.json | jq .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ config.mk
cat config.mk

# –ü—Ä–æ–≤–µ—Ä–∫–∞ package.json
cat package.json | jq .scripts
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
npm list

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π
node --version
npm --version
make --version
```

## CI/CD —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### GitHub Actions

```yaml
name: Test Build
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v2
      with:
        node-version: '18'
    - run: npm install
    - run: npx obf-minify-build
    - run: npx obf-minify-build --src src --out dist
    - run: npx obf-minify-build --no-make
    - run: npx obf-minify-build --help
    - name: Check build output
      run: |
        ls -la build/
        ls -la dist/
        test -f build/html/index.html
        test -f build/css/protection.*.css
        test -f build/js/protection.*.js
```
